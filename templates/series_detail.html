<!DOCTYPE html>
<html>
<head>
    <title>{{ series.title }} - StreamNest</title>
    <style>
        body { 
            background: #141414; 
            color: white;
            font-family: Arial, sans-serif; 
        }
        .episode{
            margin-bottom: 20px; 
            padding: 10px; 
            background: #1c1c22; 
            border-radius: 8px; 
        }
        .video-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
            max-width: 600px;
        }
        video {
            width: 100%;
            border-radius: 8px;
        }
        .next-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            background: rgba(255,56,92,0.8);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            z-index: 10;
            transition: background 0.3s ease, opacity 0.3s ease;
        }
        .next-btn:hover {
            background: rgba(255,56,92,1);
        }
    </style>
</head>
<body>
    {% if series %}
        <h1>{{ series.title }}</h1>
        <p>{{ series.description }}</p>

        {% if series.poster %}
            <img src="{{ series.poster.url }}" alt="{{ series.title }}" style="width:200px; border-radius:10px;">
        {% endif %}

        {% for episode in episodes %}
        <div class="episode">
            <h2>Episode {{ episode.number }} - {{ episode.title }}</h2>
            <div class="video-wrapper">
                <video id="video-{{ episode.number }}" controls>
                    <source src="{{ episode.video.url }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

                {% if episode.number < episodes|length %}
                <button class="next-btn" onclick="playNext({{ episode.number }})">â–¶ Next Episode</button>
                {% endif %}
            </div>
            <p>Release Date: {{ episode.release_date }}</p>
        </div>
        {% endfor %}

        <script>
            function playNext(currentNumber) {
                // Pause the current video
                const currentVideo = document.getElementById('video-' + currentNumber);
                if (currentVideo) {
                    currentVideo.pause();
                }

                // Play the next video
                const nextNumber = currentNumber + 1;
                const nextVideo = document.getElementById('video-' + nextNumber);
                if(nextVideo){
                    nextVideo.scrollIntoView({behavior: 'smooth'});
                    nextVideo.play();
                }
            }
        </script>
    {% else %}
        <h1>Series not found</h1>
    {% endif %}
</body>
</html>

